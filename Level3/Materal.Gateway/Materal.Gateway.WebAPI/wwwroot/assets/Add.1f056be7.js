import{u as _,a as w}from"./useRequest.a29580a0.js";import{m as v,i as x,k as j,l as R,j as L,F as M,K as U,E as $,r as l,H,o as b,n as I,I as K,s as a,q as n,w as s,p as z,N as G,c as J,x as O,t as F}from"./vendor.6fdda690.js";import"./index.090d5720.js";function P(...d){return v(()=>d.every(r=>r.value))}const Q=F("\u4FDD\u5B58 "),W=F("\u8FD4\u56DE "),ee=x({setup(d){const{routeService:r}=w(),e=j({CacheTimer:0,EnableCache:!1,ServiceName:""}),C={ServiceName:[{required:!0,message:"\u670D\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],CacheTimer:[{required:!0,message:"\u7F13\u5B58\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A"},{type:"number",min:1,message:"\u7F13\u5B58\u65F6\u95F4\u4E0D\u80FD\u5C0F\u4E8E0"}]},p=R(null),D=L();function E(){var u;(u=p.value)==null||u.validate(async o=>{o&&await h(e)})}const g=M(),i=v(()=>g.query.serviceName);U(()=>{i.value&&S()});const{loading:N,run:h}=_(i.value?r.edit:r.add,{manual:!0,onSuccess:u=>{$.success(u.message),D.back()}}),{loading:V,run:S}=_(()=>r.get(i.value),{manual:!0,onSuccess:({data:u})=>{e.CacheTimer=u.cacheTimer,e.EnableCache=u.enableCache,e.ServiceName=u.serviceName}}),m=P(V,N);return(u,o)=>{const k=l("el-input"),c=l("el-form-item"),B=l("el-switch"),A=l("el-input-number"),T=l("el-form"),f=l("el-button"),y=H("loading");return b(),I(G,null,[K(n(T,{ref:(t,q)=>{q.formEl=t,p.value=t},model:a(e),rules:C},{default:s(()=>[n(c,{label:"\u670D\u52A1\u540D\u79F0",prop:"ServiceName"},{default:s(()=>[n(k,{disabled:!!a(i),modelValue:a(e).ServiceName,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).ServiceName=t),modelModifiers:{trim:!0}},null,8,["disabled","modelValue"])]),_:1}),n(c,{label:"\u7F13\u5B58",prop:"EnableCache"},{default:s(()=>[n(B,{modelValue:a(e).EnableCache,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).EnableCache=t)},null,8,["modelValue"])]),_:1}),a(e).EnableCache?(b(),J(c,{key:0,label:"\u7F13\u5B58\u65F6\u95F4\uFF08\u79D2\uFF09",prop:"CacheTimer"},{default:s(()=>[n(A,{modelValue:a(e).CacheTimer,"onUpdate:modelValue":o[2]||(o[2]=t=>a(e).CacheTimer=t)},null,8,["modelValue"])]),_:1})):O("",!0)]),_:1},8,["model"]),[[y,a(m)]]),z("div",null,[n(f,{type:"primary",loading:a(m),onClick:E},{default:s(()=>[Q]),_:1},8,["loading"]),n(f,{disabled:a(m),onClick:o[3]||(o[3]=t=>u.$router.back())},{default:s(()=>[W]),_:1},8,["disabled"])])],64)}}});export{ee as default};
