@page "/Users/User"
@page "/Users/User/{id:guid}"

@using RC.Authority.DataTransmitModel.User;
@using RC.Authority.HttpClient;
@using RC.Authority.PresentationModel.User;
@using RC.ServerCenter.Web.Controls.UserControls

@inherits BaseDetail<AddUserRequestModel, EditUserRequestModel, QueryUserRequestModel, UserDTO, UserListDTO, UserHttpClient>;

<PageTitle>用户管理-RC</PageTitle>

@if (IsAdd)
{
    <AddUser Model="AddModel" Loading="Loading" OnFinish="Add"></AddUser>
}
else
{
    <EditUser Model="EditModel" Loading="Loading" OnFinish="Edit"></EditUser>
}

@code {
    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            RCData.ShowDeploys = false;
            RCData.ShowEnvironments = false;
            ListName = "Users";
            Reload();
        }
        base.OnAfterRender(firstRender);
    }
}
