var Materal;!function(m){var t,e;t=m.Component||(m.Component={}),e=function(){function t(t,e,n){this.dataIndex=0;var r=document.getElementById(t);if(!r)throw"未找到id为"+t+"的<table>";if("HTMLTableElement"!==m.Common.getType(r))throw"未找到id为"+t+"的<table>";this.tableElement=r;var i=this.tableElement.getElementsByTagName("tbody");if(0===i.length)throw"未在id为"+t+"的<table>下找到<tbody>";if(1<i.length)throw"在id为"+t+"的<table>下找到多个<tbody>";this.tableBodyElement=i[0];for(var a=0;a<this.tableBodyElement.children.length;a++){var o=this.tableBodyElement.children[a];if("HTMLTableRowElement"===m.Common.getType(o)){var l=o;if(l.hasAttribute("m-target")){this.targetRow=l;break}}}if(m.Common.isNullOrUndefined(this.targetRow))throw"未在id为"+t+"的<table><tbody>下找到<tr m-target>";this.tableBodyElement.innerHTML="",this.tableData=e,this.showNumber=n}return t.prototype.updateTable=function(){var t=this.tableData.getCount(),e=t>this.showNumber?this.showNumber:t,n=t-e;for(this.dataIndex<0&&(this.dataIndex=0),this.dataIndex>n&&(this.dataIndex=n);this.tableBodyElement.children.length>e;){var r=this.tableBodyElement.children.length-1;this.tableBodyElement.removeChild(this.tableBodyElement.children[r])}for(var i=0;i<e;i++)this.updateRow(this.dataIndex+i);return e},t.prototype.updateRow=function(t){var e=!1,n=this.tableBodyElement.children[t-this.dataIndex];(m.Common.isNullOrUndefined(n)||"HTMLTableRowElement"!==m.Common.getType(n))&&(n=document.createElement("tr"),e=!0);for(var r=this.tableData.getByIndex(t);0<n.attributes.length;)n.removeAttribute(n.attributes[0].name);if(r.hasOwnProperty("Attribute")){var i=r.Attribute;if("Object"===m.Common.getType(i)&&!m.Common.isNullOrUndefined(i))for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];"string"!==m.Common.getType(o)||m.StringHelper.isNullOrrUndefinedOrEmpty(o)?n.removeAttribute(a):n.setAttribute(a,o)}}if("Object"!==m.Common.getType(r,!1))throw"数据源"+this.tableData.getKeyByIndex(t)+"不是Object";for(var l=0;l<this.targetRow.children.length;l++)this.updateCell(n,l,r);e&&this.tableBodyElement.appendChild(n)},t.prototype.updateCell=function(t,e,n){var r=this.targetRow.children[e],i=t.children[e],a=!1;if(m.Common.isNullOrUndefined(i)&&((i=document.createElement("td")).innerHTML=r.innerHTML,a=!0),r.hasAttribute("m-model")){var o=r.getAttribute("m-model");if(m.StringHelper.isNullOrrUndefinedOrEmpty(o))throw"未识别m-model";for(var l=o.split("."),d=n,h=0;h<l.length;h++){if(!d.hasOwnProperty(l[h])){d="";break}d=d[l[h]]}switch(m.Common.getType(d)){case"string":i.innerHTML=d;break;case"number":i.innerHTML=d+"";break;default:if("Function"!==m.Common.getType(d.toString))throw"数据源数据不能转换为String";i.innerHTML=d.toString()}}a&&t.appendChild(i)},t}(),t.DictionaryTable=e}(Materal||(Materal={}));