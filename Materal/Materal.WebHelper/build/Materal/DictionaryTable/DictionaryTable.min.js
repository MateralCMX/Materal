var Materal;!function(m){var t,e;t=m.Component||(m.Component={}),e=function(){function t(t,e,n){this.dataIndex=0;var a=document.getElementById(t);if(!a)throw"未找到id为"+t+"的<table>";if("HTMLTableElement"!==m.Common.getType(a))throw"未找到id为"+t+"的<table>";this.tableElement=a;var i=this.tableElement.getElementsByTagName("tbody");if(0===i.length)throw"未在id为"+t+"的<table>下找到<tbody>";if(1<i.length)throw"在id为"+t+"的<table>下找到多个<tbody>";this.tableBodyElement=i[0];for(var r=0;r<this.tableBodyElement.children.length;r++){var l=this.tableBodyElement.children[r];if("HTMLTableRowElement"===m.Common.getType(l)){var o=l;if(o.hasAttribute("m-target")){this.targetRow=o;break}}}if(m.Common.isNullOrUndefined(this.targetRow))throw"未在id为"+t+"的<table><tbody>下找到<tr m-target>";this.tableBodyElement.innerHTML="",this.tableData=e,this.showNumber=n,this.updateTable()}return t.prototype.updateTable=function(){var t=this.tableData.getCount(),e=t>this.showNumber?this.showNumber:t,n=t-e;for(this.dataIndex<0&&(this.dataIndex=0),this.dataIndex>n&&(this.dataIndex=n);this.tableBodyElement.children.length>e;){var a=this.tableBodyElement.children.length-1;this.tableBodyElement.removeChild(this.tableBodyElement.children[a])}for(var i=0;i<e;i++)this.updateRow(this.dataIndex+i)},t.prototype.updateRow=function(t){var e=!1,n=this.tableBodyElement.children[t-this.dataIndex];(m.Common.isNullOrUndefined(n)||"HTMLTableRowElement"!==m.Common.getType(n))&&(n=document.createElement("tr"),e=!0);var a=this.tableData.getByIndex(t);if("Object"!==m.Common.getType(a,!1))throw"数据源"+this.tableData.getKeyByIndex(t)+"不是Object";for(var i=0;i<this.targetRow.children.length;i++)this.updateCell(n,i,a);e&&this.tableBodyElement.appendChild(n)},t.prototype.updateCell=function(t,e,n){var a=this.targetRow.children[e],i=t.children[e],r=!1;if(m.Common.isNullOrUndefined(i)&&((i=document.createElement("td")).innerHTML=a.innerHTML,r=!0),a.hasAttribute("m-model")){var l=a.getAttribute("m-model");if(m.StringHelper.isNullOrrUndefinedOrEmpty(l))throw"未识别m-model";for(var o=l.split("."),d=n,h=0;h<o.length;h++){if(!d.hasOwnProperty(o[h])){d="";break}d=d[o[h]]}switch(m.Common.getType(d)){case"string":i.innerHTML=d;break;case"number":i.innerHTML=d+"";break;default:if("Function"!==m.Common.getType(d.toString))throw"数据源数据不能转换为String";i.innerHTML=d.toString()}}r&&t.appendChild(i)},t}(),t.DictionaryTable=e}(Materal||(Materal={}));